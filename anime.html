<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anime List - My Anime Memories</title>
    <link rel="stylesheet" href="loading.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="spinner"></div>
            <p>Loading anime list...</p>
        </div>
    </div>

    <div class="container" style="display: none;">
        <header class="header">
            <div class="logo">
                <h1><i class="fas fa-tv"></i> Anime Collection</h1>
            </div>
            <div class="user-section">
                <div class="user-input">
                    <input type="password" id="userId" placeholder="Enter User ID (*****)">
                    <button onclick="login()" class="btn-login">
                        <i class="fas fa-sign-in-alt"></i> Login
                    </button>
                </div>
                <div class="database-status">
                    <span id="db-status" class="offline">‚óè Offline</span>
                </div>
            </div>
        </header>

        <nav class="main-nav">
            <ul>
                <li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="anime.html" class="active"><i class="fas fa-tv"></i> Anime</a></li>
                <li><a href="manga.html"><i class="fas fa-book"></i> Manga</a></li>
                <li><a href="manhwa.html"><i class="fas fa-paint-brush"></i> Manhwa</a></li>
            </ul>
        </nav>

        <main class="main-content">
            <!-- Filter Menu -->
            <div class="filter-menu">
                <button class="filter-btn active" onclick="filterAnime('all')">
                    <i class="fas fa-list"></i> All <span id="count-all" class="count-badge">0</span>
                </button>
                <button class="filter-btn" onclick="filterAnime('watching')">
                    <i class="fas fa-eye"></i> Watching <span id="count-watching" class="count-badge">0</span>
                </button>
                <button class="filter-btn" onclick="filterAnime('dropped')">
                    <i class="fas fa-ban"></i> Dropped <span id="count-dropped" class="count-badge">0</span>
                </button>
                <button class="filter-btn" onclick="filterAnime('plan')">
                    <i class="fas fa-calendar-check"></i> Plan <span id="count-plan" class="count-badge">0</span>
                </button>
                <button class="filter-btn" onclick="filterAnime('completed')">
                    <i class="fas fa-check-circle"></i> Completed <span id="count-completed" class="count-badge">0</span>
                </button>
            </div>

            <!-- Add New Button -->
            <div class="add-new-section">
                <button onclick="showAddAnimeForm()" class="btn-add">
                    <i class="fas fa-plus"></i> Add New Anime
                </button>
                <div class="stats-summary">
                    Total: <span id="total-count">0</span> | 
                    Watching: <span id="summary-watching">0</span> | 
                    Dropped: <span id="summary-dropped">0</span> | 
                    Plan: <span id="summary-plan">0</span> |
                    Completed: <span id="summary-completed">0</span>
                </div>
            </div>

            <!-- Items Grid -->
            <div id="anime-grid" class="items-grid">
                <!-- Anime items will be loaded here -->
            </div>

            <!-- No Items Message -->
            <div id="no-anime" class="no-items" style="display: none;">
                <i class="fas fa-tv fa-3x"></i>
                <h3>No anime added yet</h3>
                <p>Click "Add New Anime" to start your collection!</p>
            </div>
        </main>

        <footer class="footer">
            <div class="footer-content">
                <div class="developer-info">
                    <h4>About Developer</h4>
                    <p><i class="fas fa-user"></i> Mark Joseph Rogasan</p>
                </div>
                <div class="footer-note">
                    <p>Track and remember all your anime memories</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- Add/Edit Modal -->
    <div id="anime-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="anime-modal-title">Add New Anime</h3>
                <button onclick="closeAnimeModal()" class="close-btn">&times;</button>
            </div>
            <form id="anime-form" onsubmit="saveAnime(event)">
                <input type="hidden" id="anime-id">
                <input type="hidden" id="anime-type" value="anime">
                
                <div class="form-group">
                    <label for="anime-title">Title *</label>
                    <input type="text" id="anime-title" required>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="anime-status">Status</label>
                        <select id="anime-status">
                            <option value="watching">Watching</option>
                            <option value="plan">Plan to Watch</option>
                            <option value="dropped">Dropped</option>
                            <option value="completed">Completed</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="anime-episode">Episode</label>
                        <input type="text" id="anime-episode" placeholder="e.g., 12/24">
                    </div>
                </div>

                <div class="form-group">
                    <label for="anime-rating">Rating (0-10)</label>
                    <input type="number" id="anime-rating" min="0" max="10" step="0.1" placeholder="6.4">
                </div>

                <div class="form-group">
                    <label for="anime-image_url">Image URL</label>
                    <input type="url" id="anime-image_url" placeholder="https://example.com/image.jpg">
                </div>

                <div class="form-group">
                    <label for="anime-video_url">YouTube Video URL</label>
                    <input type="url" id="anime-video_url" placeholder="https://youtube.com/embed/...">
                </div>

                <div class="form-group">
                    <label for="anime-link">Streaming Link</label>
                    <input type="url" id="anime-link" placeholder="https://streaming-site.com/anime">
                </div>

                <div class="form-group">
                    <label for="anime-notes">Notes</label>
                    <textarea id="anime-notes" rows="3" placeholder="Your thoughts, comments..."></textarea>
                </div>

                <div class="form-actions">
                    <button type="button" onclick="closeAnimeModal()" class="btn-cancel">Cancel</button>
                    <button type="submit" class="btn-save">Save Anime</button>
                </div>
            </form>
        </div>
    </div>

    <script src="auth.js"></script>
    <script src="database.js"></script>
    <script src="anime.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                document.getElementById('loading-screen').style.display = 'none';
                document.querySelector('.container').style.display = 'block';
                checkDatabaseStatus();
                loadAnime();
            }, 1000);
        });
        
        window.onclick = function(event) {
            const modal = document.getElementById('anime-modal');
            if (event.target === modal) {
                closeAnimeModal();
            }
        };
    </script>
</body>
</html>