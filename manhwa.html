<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manhwa List - My Anime Memories</title>
    <link rel="stylesheet" href="loading.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="spinner"></div>
            <p>Loading manhwa list...</p>
        </div>
    </div>

    <div class="container" style="display: none;">
        <header class="header">
            <div class="logo">
                <h1><i class="fas fa-paint-brush"></i> Manhwa Collection</h1>
            </div>
            <div class="user-section">
                <div class="user-input">
                    <input type="password" id="userId" placeholder="Enter User ID (*****)">
                    <button onclick="login()" class="btn-login">
                        <i class="fas fa-sign-in-alt"></i> Login
                    </button>
                </div>
                <div class="database-status">
                    <span id="db-status" class="offline">‚óè Offline</span>
                </div>
            </div>
        </header>

        <nav class="main-nav">
            <ul>
                <li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="anime.html"><i class="fas fa-tv"></i> Anime</a></li>
                <li><a href="manga.html"><i class="fas fa-book"></i> Manga</a></li>
                <li><a href="manhwa.html" class="active"><i class="fas fa-paint-brush"></i> Manhwa</a></li>
            </ul>
        </nav>

        <main class="main-content">
            <!-- Filter Menu -->
            <div class="filter-menu">
                <button class="filter-btn active" onclick="filterManhwa('all')">
                    <i class="fas fa-list"></i> All <span id="count-all" class="count-badge">0</span>
                </button>
                <button class="filter-btn" onclick="filterManhwa('reading')">
                    <i class="fas fa-eye"></i> Reading <span id="count-reading" class="count-badge">0</span>
                </button>
                <button class="filter-btn" onclick="filterManhwa('dropped')">
                    <i class="fas fa-ban"></i> Dropped <span id="count-dropped" class="count-badge">0</span>
                </button>
                <button class="filter-btn" onclick="filterManhwa('plan')">
                    <i class="fas fa-calendar-check"></i> Plan <span id="count-plan" class="count-badge">0</span>
                </button>
                <button class="filter-btn" onclick="filterManhwa('completed')">
                    <i class="fas fa-check-circle"></i> Completed <span id="count-completed" class="count-badge">0</span>
                </button>
            </div>

            <!-- Add New Button -->
            <div class="add-new-section">
                <button onclick="showAddManhwaForm()" class="btn-add">
                    <i class="fas fa-plus"></i> Add New Manhwa
                </button>
                <div class="stats-summary">
                    Total: <span id="total-count">0</span> | 
                    Reading: <span id="summary-reading">0</span> | 
                    Dropped: <span id="summary-dropped">0</span> | 
                    Plan: <span id="summary-plan">0</span> |
                    Completed: <span id="summary-completed">0</span>
                </div>
            </div>

            <!-- Items Grid -->
            <div id="manhwa-grid" class="items-grid">
                <!-- Manhwa items will be loaded here -->
            </div>

            <!-- No Items Message -->
            <div id="no-manhwa" class="no-items" style="display: none;">
                <i class="fas fa-paint-brush fa-3x"></i>
                <h3>No manhwa added yet</h3>
                <p>Click "Add New Manhwa" to start your collection!</p>
            </div>
        </main>

        <footer class="footer">
            <div class="footer-content">
                <div class="developer-info">
                    <h4>About Developer</h4>
                    <p><i class="fas fa-user"></i> Mark Joseph Rogasan</p>
                </div>
                <div class="footer-note">
                    <p>Track and remember all your manhwa memories</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- Add/Edit Modal -->
    <div id="manhwa-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="manhwa-modal-title">Add New Manhwa</h3>
                <button onclick="closeManhwaModal()" class="close-btn">&times;</button>
            </div>
            <form id="manhwa-form" onsubmit="saveManhwa(event)">
                <input type="hidden" id="manhwa-id">
                <input type="hidden" id="manhwa-type" value="manhwa">
                
                <div class="form-group">
                    <label for="manhwa-title">Title *</label>
                    <input type="text" id="manhwa-title" required>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="manhwa-status">Status</label>
                        <select id="manhwa-status">
                            <option value="reading">Reading</option>
                            <option value="plan">Plan to Read</option>
                            <option value="dropped">Dropped</option>
                            <option value="completed">Completed</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="manhwa-chapter">Chapter</label>
                        <input type="text" id="manhwa-chapter" placeholder="e.g., 75/150">
                    </div>
                </div>

                <div class="form-group">
                    <label for="manhwa-rating">Rating (0-10)</label>
                    <input type="number" id="manhwa-rating" min="0" max="10" step="0.1" placeholder="6.4">
                </div>

                <div class="form-group">
                    <label for="manhwa-image_url">Image URL</label>
                    <input type="url" id="manhwa-image_url" placeholder="https://example.com/image.jpg">
                </div>

                <div class="form-group">
                    <label for="manhwa-video_url">YouTube Video URL (Optional)</label>
                    <input type="url" id="manhwa-video_url" placeholder="https://youtube.com/embed/...">
                </div>

                <div class="form-group">
                    <label for="manhwa-link">Reading Source Link</label>
                    <input type="url" id="manhwa-link" placeholder="https://manhwa-site.com/series">
                </div>

                <div class="form-group">
                    <label for="manhwa-notes">Notes</label>
                    <textarea id="manhwa-notes" rows="3" placeholder="Your thoughts, comments..."></textarea>
                </div>

                <div class="form-actions">
                    <button type="button" onclick="closeManhwaModal()" class="btn-cancel">Cancel</button>
                    <button type="submit" class="btn-save">Save Manhwa</button>
                </div>
            </form>
        </div>
    </div>

    <script src="auth.js"></script>
    <script src="database.js"></script>
    <script src="manhwa.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                document.getElementById('loading-screen').style.display = 'none';
                document.querySelector('.container').style.display = 'block';
                checkDatabaseStatus();
                loadManhwa();
            }, 1000);
        });
        
        window.onclick = function(event) {
            const modal = document.getElementById('manhwa-modal');
            if (event.target === modal) {
                closeManhwaModal();
            }
        };
    </script>
</body>
</html>